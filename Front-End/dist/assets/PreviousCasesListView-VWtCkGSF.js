import{b as N}from"./PathologistList.vue_vue_type_style_index_0_scoped_45f5ffeb_lang-FwbajLSj.js";import{d as $,o as B,a as D,j as p,w as i,u as e,e as l,f as o,h as a,b as F,t as R,i as S,E as T,F as U}from"./index-CAHFE_9E.js";import{_ as I}from"./DiseaseList.vue_vue_type_style_index_0_scoped_2e8ef3ac_lang-CSxq79ax.js";import{_ as w}from"./ActionButton.vue_vue_type_script_setup_true_lang-BQdFEsew.js";import{u as j,_ as z,a as K,d as M,b as O,C as q,c as G}from"./useExcelExport-BNuF078Y.js";/* empty css                                                                   */import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SearchButton.vue_vue_type_script_setup_true_lang-y2wCoroa.js";import"./FormSelect-Dz8sviG5.js";import"./PathologistList-CbsQJHAr.js";import"./casesApi.service-DwGpQD03.js";import"./EntityList-gIDUOf46.js";import"./TestList-BA4OK-D1.js";import"./RefreshIcon-CgqLp7N5.js";import"./FormCheckbox.vue_vue_type_script_setup_true_lang-DxUtxK1N.js";import"./html2pdf-I8xnP9zX.js";import"./PreviewButton.vue_vue_type_script_setup_true_lang-CTpBWkFw.js";import"./cases.store-BuW2t6qD.js";const J={class:"space-y-4"},Q={class:"p-8 text-center"},W={class:"p-8 text-center"},X={class:"text-red-600 mb-4"},Y={class:"bg-white rounded-xl border border-gray-200"},Z="Casos Anteriores",ee=$({__name:"PreviousCasesListView",setup(te){const{cases:b,isLoading:u,error:c,filters:n,sortKey:C,sortOrder:v,currentPage:d,itemsPerPage:f,selectedCase:y,filteredCases:m,paginatedCases:_,totalPages:k,loadCases:h,sortBy:E,showDetails:P,closeDetails:x,validateCase:V}=j(),{exportExcel:L}=M(),g=s=>{h()};B(()=>{window.addEventListener("case-created",g)}),D(()=>{window.removeEventListener("case-created",g)});const A=[{key:"select",label:"",sortable:!1,width:"w-12"},{key:"caseCode",label:"Código",sortable:!0,width:"w-32"},{key:"patient.dni",label:"Cédula",sortable:!0,width:"w-32"},{key:"patient.fullName",label:"Paciente",sortable:!0,width:"w-48"},{key:"pathologist",label:"Patólogo",sortable:!0,width:"w-40"},{key:"status",label:"Estado",sortable:!0,width:"w-32"},{key:"receivedAt",label:"Recibido",sortable:!0,width:"w-32"},{key:"deliveredAt",label:"Entregado",sortable:!0,width:"w-32"},{key:"actions",label:"Acciones",sortable:!1,width:"w-32"}];return(s,t)=>(l(),p(e(N),null,{default:i(()=>[o(I,{pageTitle:Z}),a("div",J,[e(u)?(l(),p(w,{key:0},{default:i(()=>[a("div",Q,[o(z),t[5]||(t[5]=a("p",{class:"text-gray-600 mt-2"},"Cargando casos anteriores...",-1))])]),_:1})):e(c)?(l(),p(w,{key:1},{default:i(()=>[a("div",W,[a("p",X,R(e(c)),1),o(e(K),{size:"sm",variant:"primary",onClick:s.reload},{default:i(()=>[...t[6]||(t[6]=[S("Reintentar",-1)])]),_:1},8,["onClick"])])]),_:1})):(l(),F(U,{key:2},[o(O,{modelValue:e(n),"onUpdate:modelValue":t[0]||(t[0]=r=>T(n)?n.value=r:null),totalFiltered:e(m).length,totalAll:e(b).length,isLoading:e(u),canExport:e(m).length>0,onRefresh:s.reload,onExport:e(L)},null,8,["modelValue","totalFiltered","totalAll","isLoading","canExport","onRefresh","onExport"]),a("div",Y,[o(q,{cases:e(_),columns:A,"sort-key":e(C),"sort-order":e(v),"current-page":e(d),"total-pages":e(k),"items-per-page":e(f),"total-items":e(m).length,"no-results-message":s.hasActiveFilters?"No se encontraron casos anteriores con los filtros aplicados":"No hay casos anteriores disponibles",onSort:t[1]||(t[1]=r=>e(E)(r)),onShowDetails:e(P),onEdit:s.editCase,onValidate:e(V),onPerform:s.performCase,onUpdateItemsPerPage:t[2]||(t[2]=r=>f.value=r),onPrevPage:t[3]||(t[3]=()=>d.value--),onNextPage:t[4]||(t[4]=()=>d.value++)},null,8,["cases","sort-key","sort-order","current-page","total-pages","items-per-page","total-items","no-results-message","onShowDetails","onEdit","onValidate","onPerform"])]),o(G,{"case-item":e(y),onClose:e(x),onEdit:s.editCase,onPreview:s.previewCase},null,8,["case-item","onClose","onEdit","onPreview"])],64))])]),_:1}))}}),ye=H(ee,[["__scopeId","data-v-e346cfe3"]]);export{ye as default};
